!function(){"use strict";function n(){(function(){window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");const n=sessionStorage.getItem("gosponos_last_refresh"),e=Date.now();return!n&&(sessionStorage.setItem("gosponos_last_refresh",e.toString()),"caches"in window?caches.keys().then(function(n){n.forEach(function(n){caches.delete(n)})}).then(function(){location.reload()}):location.reload(),!0)})()||(function(){if("serviceWorker"in navigator){navigator.serviceWorker.register("/sw.js").then(function(n){console.log("Service Worker зарегистрирован:",n.scope),n.addEventListener("updatefound",function(){const e=n.installing;e.addEventListener("statechange",function(){"installed"===e.state&&navigator.serviceWorker.controller&&e.postMessage({type:"SKIP_WAITING"})})})}).catch(function(n){console.log("Ошибка регистрации Service Worker:",n)});let n=!1;navigator.serviceWorker.addEventListener("controllerchange",function(){n||(n=!0,location.reload())})}}(),function(){let n=0,e=0,t=!1,o=0;const r=document.createElement("div");r.id="pull-refresh-indicator",r.innerHTML='<div class="refresh-spinner"></div><span class="refresh-text">Потяните для обновления</span>',document.body.insertBefore(r,document.body.firstChild);const i=document.createElement("style");i.textContent="\n      #pull-refresh-indicator {\n        position: fixed;\n        top: -60px;\n        left: 0;\n        right: 0;\n        height: 60px;\n        background: linear-gradient(135deg, #8B4513, #D2691E);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 10px;\n        z-index: 9999;\n        transition: transform 0.2s ease-out;\n        box-shadow: 0 2px 10px rgba(0,0,0,0.2);\n      }\n\n      #pull-refresh-indicator.visible {\n        transform: translateY(60px);\n      }\n\n      #pull-refresh-indicator.refreshing .refresh-spinner {\n        animation: spin 1s linear infinite;\n      }\n\n      #pull-refresh-indicator.refreshing .refresh-text {\n        display: none;\n      }\n\n      .refresh-spinner {\n        width: 24px;\n        height: 24px;\n        border: 3px solid rgba(255,255,255,0.3);\n        border-top-color: white;\n        border-radius: 50%;\n      }\n\n      .refresh-text {\n        color: white;\n        font-size: 14px;\n        font-weight: 500;\n      }\n\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n\n      body.pulling {\n        overflow: hidden;\n        touch-action: none;\n      }\n    ",document.head.appendChild(i);const s=r.querySelector(".refresh-text");document.addEventListener("touchstart",function(e){0===window.scrollY&&(n=e.touches[0].clientY,t=!0)},{passive:!0}),document.addEventListener("touchmove",function(i){if(t&&(e=i.touches[0].clientY,o=e-n,o>0&&0===window.scrollY)){i.preventDefault(),document.body.classList.add("pulling");const n=Math.min(o,150);n>10&&(r.classList.add("visible"),r.style.transform=`translateY(${Math.min(n,60)}px)`),s.textContent=o>=80?"Отпустите для обновления":"Потяните для обновления"}},{passive:!1}),document.addEventListener("touchend",function(i){t&&(document.body.classList.remove("pulling"),o>=80?(r.classList.add("refreshing"),s.textContent="Обновление...",setTimeout(function(){location.reload()},500)):(r.classList.remove("visible"),r.style.transform=""),t=!1,o=0,n=0,e=0)},{passive:!0})}())}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();